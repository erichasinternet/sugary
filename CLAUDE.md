# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

**Sugary** is a tool that helps founders capture and nurture interest in specific features. When users request features anywhere (Reddit, Twitter, support), founders can share a unique link to track interest and keep users updated.

- **App Name**: Sugary
- **Domain**: sugary.dev  
- **URLs**: `company.sugary.dev/feature-slug` format

## Commands

### Development
- `npm run dev` - Start development server with Turbopack (opens at http://localhost:3000)
- `npm run build` - Build the application for production
- `npm start` - Start production server
- `npm run lint` - Run Biome formatter, linter, and import sorting checks
- `npm run lint:fix` - Apply Biome fixes, formatting, and import sorting

### Convex Backend
- `npx convex -h` - View all available Convex CLI commands
- `npx convex docs` - Launch Convex documentation
- `npx convex dev` - Start Convex development mode (run this alongside `npm run dev`)
- `npx convex deploy` - Deploy Convex functions to production

## Architecture

### Tech Stack
- **Frontend**: Next.js 15 with App Router, React 19, TypeScript
- **Styling**: Tailwind CSS 4 with custom CSS variables for theming
- **Backend**: Convex for real-time database and serverless functions
- **Email**: @convex-dev/resend integration for email functionality (confirmation emails, feature updates)
- **Branding**: All references should use "Sugary" not "FeatureLoop"
- **Fonts**: Geist Sans and Geist Mono from Vercel

### Project Structure
- `app/` - Next.js App Router pages and layouts
  - `layout.tsx` - Root layout with font configuration and global styling
  - `page.tsx` - Homepage component
  - `globals.css` - Global styles with dark/light mode CSS variables
- `convex/` - Convex backend functions and configuration
  - `_generated/` - Auto-generated Convex API and type definitions
  - `tsconfig.json` - TypeScript config specific to Convex functions
- `public/` - Static assets (SVG icons, images)

### Key Features
- **Dark Mode Support**: CSS variables in globals.css handle light/dark theme switching
- **Type Safety**: Full TypeScript setup with strict mode enabled
- **Path Aliases**: `@/*` alias maps to project root for cleaner imports
- **Font Optimization**: Next.js font optimization with Geist font family

### Convex Integration
- Backend functions live in `convex/` directory
- Use `query` for read operations, `mutation` for write operations
- Import from `"./_generated/server"` for Convex utilities
- Client-side: Import API from `convex/_generated/api` 
- React hooks: `useQuery()` and `useMutation()` from "convex/react"

### Development Workflow
1. Run `npm run dev` for frontend development
2. Run `npx convex dev` in separate terminal for backend functions
3. Convex functions auto-deploy during development
4. Use `npm run lint:fix` before committing changes

### Core Features
- **Public Feature Pages**: `[company]/[feature-slug]` routes for end-user signups
- **Dashboard**: Real-time metrics, subscriber management, feature creation
- **Email System**: Confirmation emails and feature update broadcasts
- **Authentication**: Convex auth with email/password
- **Company Setup**: Unique company slugs for URL structure

### Environment Variables (Convex)
- `JWT_PRIVATE_KEY`: Auto-generated by `npx @convex-dev/auth`
- `JWKS`: Auto-generated by `npx @convex-dev/auth`  
- `SITE_URL`: Set to localhost:3000 for development
- `RESEND_API_KEY`: Get from resend.com for email functionality